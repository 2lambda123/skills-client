!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@skills/skills-client-configuration")):"function"==typeof define&&define.amd?define(["exports","@skills/skills-client-configuration"],t):t((e=e||self).SkillsReporter={},e.SkillsConfiguration)}(this,(function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var n=new Set,r=new Set,o=function(e,n,r){var o=this;new Promise((function(e,n){var r=new XMLHttpRequest;r.open("GET",t.getAuthenticator()),r.onreadystatechange=function(){if(4===r.readyState)if(200!==r.status)n(new Error("Unable to authenticate"));else{var t=JSON.parse(r.response);t.access_token?e(t.access_token):n(new Error("Unable to authenticate"))}},r.send()})).then((function(s){t.setAuthToken(s),o.reportSkill(e).then((function(e){n(e)})).catch((function(e){r(e)}))})).catch((function(e){r(e)}))},s={addSuccessHandler:function(e){n.add(e)},addErrorHandler:function(e){r.add(e)},reportSkill:function(e){var s=this;t.validate();var a=new Promise((function(n,r){if(t.getAuthToken()||t.isPKIMode()){var a=new XMLHttpRequest;a.open("POST","".concat(t.getServiceUrl(),"/api/projects/").concat(t.getProjectId(),"/skills/").concat(e)),a.withCredentials=!0,a.setRequestHeader("Authorization","Bearer ".concat(t.getAuthToken())),a.onreadystatechange=function(){4===a.readyState&&(200!==a.status&&0!==a.status&&401!==a.status?r(JSON.parse(a.response)):401===a.status||0===a.status?o.call(s,e,n,r):n(JSON.parse(a.response)))},a.send()}else o.call(s,e,n,r)}));return a.then((function(e){var t;t=e,n.forEach((function(e){return e(t)}))})),a.catch((function(e){var t;t=e,r.forEach((function(e){return e(t)}))})),a}};e.FAILURE_EVENT="skills-report-error",e.SUCCESS_EVENT="skills-report-success",e.SkillsReporter=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=SkillsReporter.umd.min.js.map
